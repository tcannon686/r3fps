(this.webpackJsonpr3fps=this.webpackJsonpr3fps||[]).push([[0],{123:function(e,t,n){},124:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),o=n.n(c),i=(n(123),n(124),n(14)),s=n(7),u=n(12),l=n(3),j=n(191),b=n(195),p=n(202),d=n(203),f=n(194),O=n(198),h=n(193),m=n(204),v=n(103),x=n.n(v),g=n(102),y=n.n(g),C=n(99),k=n.n(C),S=n(101),M=n.n(S),w=n(100),V=n.n(w),E=n(185),z=n(184),P=n(5),D=n(19),N=n(29),R=n(23),B=n(2),L=Object(r.createContext)(Object(D.h)({}));function I(e){var t=e.children,n=Object(r.useMemo)((function(){return Object(D.h)({})}),[]);return Object(B.jsx)(L.Provider,{value:n,children:t})}function U(e){var t=e.children,n=Object(r.useMemo)((function(){return Object(D.h)({})}),[]);return Object(R.b)((function(e,t){n.update(Math.min(t,.1))})),Object(B.jsx)(L.Provider,{value:n,children:t})}function F(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object(r.useMemo)((function(){return Object(D.b)(t)}),[t]),c=Object(r.useContext)(L);return Object(r.useEffect)((function(){e.current&&(e.current.matrixAutoUpdate=!1);var t=Object(D.d)(a).subscribe((function(){e.current&&e.current.matrix.copy(a.transform)}));return n&&c.add(a),function(){t.unsubscribe(),n&&c.remove(a)}}),[a,c,e,n]),a}function W(e){do{e.set(Math.random()-Math.random(),Math.random()-Math.random(),Math.random()-Math.random())}while(0===e.lengthSq());e.normalize()}function A(e){var t=Object(r.useRef)(null);return Object(r.useMemo)((function(){t.current&&t.current.dispose();var n=function(e){for(var t=new l.BufferGeometry,n=[],r=[],a=function(e,t,n){var a=r[n].clone().sub(r[e]),c=r[n].clone().sub(r[t]),o=a.cross(c);if(0===o.lengthSq())return null;o.normalize();var i=o.dot(r[n]);return{ia:e,ib:t,ic:n,normal:o,distance:i}},c=new Map,o=function(e,t){var n=e+67108864*t,r=t+67108864*e;c.has(r)?c.set(r,c.get(r)+1):c.set(n,(c.get(n)||0)+1)},i=function(){var t=new l.Vector3;do{W(t),e(t)}while(r.some((function(e){return e.equals(t)})));r.push(t)};r.length<3;)i();var s=new l.Vector3,u=a(0,2,1);if(s.copy(u.normal).negate(),e(s),r.some((function(e){return e.equals(s)}))){u.normal.negate();var j=r[0];r[0]=r[2],r[2]=j,s.copy(u.normal).negate(),e(s)}r.push(s),n.push(u),n.push(a(0,1,3)),n.push(a(1,2,3)),n.push(a(2,0,3));for(var b=!1;!b;){b=!0;var p,d=Object(N.a)(n);try{var f=function(){var t=p.value;c.clear();var i=(new l.Vector3).copy(t.normal);if(e(i),!r.some((function(e){return i.equals(e)}))&&i.dot(t.normal)-t.distance>.01&&r.length<4096){b=!1;for(var s=0;s<n.length;s++){var u=n[s];i.clone().sub(r[u.ia]).dot(u.normal)>=0&&(o(u.ia,u.ib),o(u.ib,u.ic),o(u.ic,u.ia),n.splice(s,1),s--)}r.push(i);var j,d=Object(N.a)(c.keys());try{for(d.s();!(j=d.n()).done;){var f=j.value;if(1===c.get(f)){var O=67108863&f,h=Math.floor(f/67108864),m=a(O,h,r.length-1);n.push(m)}}}catch(v){d.e(v)}finally{d.f()}}};for(d.s();!(p=d.n()).done;)f()}catch(m){d.e(m)}finally{d.f()}}!function(){var e=new Map;n.forEach((function(t){e.has(t.ia)||e.set(t.ia,[]),e.has(t.ib)||e.set(t.ib,[]),e.has(t.ic)||e.set(t.ic,[]),e.get(t.ia).push(t),e.get(t.ib).push(t),e.get(t.ic).push(t)})),e.forEach((function(e,t){var n=[[e[0]]];e.forEach((function(e){var t,r=Object(N.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=e.normal.dot(a[0].normal);if(Math.acos(Math.max(-1,Math.min(1,c)))<Math.PI/4)return void a.push(e)}}catch(m){r.e(m)}finally{r.f()}n.push([e])}));for(var a=1;a<n.length;a++)n[a].forEach((function(e){e.ia===t&&(e.ia=r.length),e.ib===t&&(e.ib=r.length),e.ic===t&&(e.ic=r.length)})),r.push(r[t])}))}();var O=new Float32Array(r.flatMap((function(e){return[e.x,e.y,e.z]}))),h=n.flatMap((function(e){return[e.ia,e.ib,e.ic]}));return t.setAttribute("position",new l.BufferAttribute(O,3)),t.setIndex(h),t.computeVertexNormals(),t.attributes.normal.needsUpdate=!0,t.computeBoundingSphere(),t}(e);return t.current=n,n}),[e])}var q=n(6),G=n(4),T=n(10),J=n(11),X=n(94),Y=n(95);function $(){var e=window.location;return"".concat(e.protocol,"/").concat(e.host,"/").concat(e.pathname.split("/")[1])}var K=["url"],Q=["url"],Z=["url"],H=function(e){Object(T.a)(n,e);var t=Object(J.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(G.a)(n,[{key:"render",value:function(){return this.state.hasError?null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),n}(r.Component),_=Object(r.forwardRef)((function(e,t){var n=e.url,r=Object(P.a)(e,K),a=Object(R.c)(Y.a,n);return Object(B.jsx)("primitive",Object(s.a)({ref:t,object:a},r))})),ee=Object(r.forwardRef)((function(e,t){var n=e.url,r=Object(P.a)(e,Q),a=Object(R.c)(X.a,n).scene;return Object(B.jsx)("primitive",Object(s.a)({ref:t,object:a},r))})),te=Object(r.forwardRef)((function(e,t){var n=e.url,a=Object(P.a)(e,Z),c=Object(r.useState)(0),o=Object(u.a)(c,2),i=o[0],l=o[1],j=new URL(n,$()).pathname,b=null;if(Object(r.useEffect)((function(){l((function(e){return e+1}))}),[n]),j.match(/\.glb$|\.gltf$/))b=Object(B.jsx)(ee,Object(s.a)({ref:t,url:n},a));else{if(!j.match(/\.obj$/))return null;b=Object(B.jsx)(_,Object(s.a)({ref:t,url:n},a))}return Object(B.jsx)(H,{children:Object(B.jsx)(r.Suspense,{fallback:null,children:b})},i)})),ne=["support"],re=["support","position","rotation","scale","kinematic","userData","color","visible","inEditor","enableBody","modelUrl"],ae=Object(r.forwardRef)((function(e,t){var n=e.support,r=Object(P.a)(e,ne),a=A(n);return Object(B.jsx)("mesh",Object(s.a)({ref:t,geometry:a},r))}));function ce(e){var t=e.support,n=e.position,a=e.rotation,c=e.scale,o=e.kinematic,i=(e.userData,e.color),j=e.visible,b=e.inEditor,p=e.enableBody,d=e.modelUrl,f=Object(P.a)(e,re);n=n||[0,0,0],a=a||[0,0,0],c=c||[1,1,1],j=void 0===j||j;var O=Object(r.useMemo)((function(){return{supports:[t],isKinematic:o}}),[t,o]),h=Object(r.useRef)(),m=F(h,O,p),v=a,x=Object(u.a)(v,3),g=x[0],y=x[1],C=x[2],k=c,S=Object(u.a)(k,3),M=S[0],w=S[1],V=S[2],E=n,z=Object(u.a)(E,3),D=z[0],N=z[1],R=z[2];return Object(r.useEffect)((function(){m.transform.identity(),m.transform.multiply((new l.Matrix4).makeRotationFromEuler(new l.Euler(g*Math.PI/180,y*Math.PI/180,C*Math.PI/180))),m.transform.multiply((new l.Matrix4).makeScale(M,w,V)),m.transform.setPosition(D,N,R),m.velocity.set(0,0,0),m.update()}),[m,D,N,R,g,y,C,M,w,V]),j||b?Object(B.jsxs)("group",{ref:h,position:n,rotation:a,scale:c,children:[d&&Object(B.jsx)(te,Object(s.a)({support:t,url:d},f)),(!d||b)&&Object(B.jsx)(ae,Object(s.a)(Object(s.a)({support:t},f),{},{children:Object(B.jsx)("meshStandardMaterial",{color:i})}))]}):null}var oe=["support","roundRadius","flatTop","flatBottom"];function ie(e){var t=e.support,n=e.roundRadius,a=e.flatTop,c=e.flatBottom,o=Object(P.a)(e,oe),i=n||0,u=Object(r.useMemo)((function(){return i>0?a?c?Object(D.e)({radius:i}):Object(D.j)(Object(D.e)({radius:i}),Object(D.i)({radius:i})):c?Object(D.j)(Object(D.i)({radius:i}),Object(D.e)({radius:i})):Object(D.i)({radius:i}):null}),[i,a,c]),l=Object(r.useMemo)((function(){return i>0?Object(D.k)(t,u):t}),[t,u,i]);return Object(B.jsx)(ce,Object(s.a)({support:l},o))}var se=n(8),ue=n(178),le=n(196);function je(e){var t=e.selection,n=e.data,a=e.onChange,c=e.prop,o=e.label,j=e.defaultValue,b=Object(r.useMemo)((function(){var e=new l.Vector3,r=new l.Vector3;return n.objects.forEach((function(n){t.has(n.id)&&(n.props[c]?r.set.apply(r,Object(i.a)(n.props[c])):r.set.apply(r,Object(i.a)(j)),e.add(r))})),e.multiplyScalar(1/t.size),[e.x,e.y,e.z]}),[t,n,c,j]),p=Object(r.useState)(j),d=Object(u.a)(p,2),f=d[0],O=d[1],h=Object(u.a)(b,3),m=h[0],v=h[1],x=h[2];Object(r.useEffect)((function(){O([m,v,x].map((function(e){return Math.round(1e3*e)/1e3})))}),[m,v,x]);var g=function(){if(f.some((function(e){return isNaN(e)})))O(b);else{var e=Object(s.a)(Object(s.a)({},n),{},{objects:n.objects.map((function(e){if(t.has(e.id)){for(var n=Object(i.a)(e.props[c]||j),r=0;r<n.length;r++)n[r]+=f[r]-b[r];return Object(s.a)(Object(s.a)({},e),{},{props:Object(s.a)(Object(s.a)({},e.props),{},Object(se.a)({},c,n))})}return e}))});a(e)}};return Object(B.jsx)(ue.a,{container:!0,spacing:1,children:["x","y","z"].map((function(e,t){return Object(B.jsx)(ue.a,{item:!0,xs:4,children:Object(B.jsx)(le.a,{label:(o?o+" ":"")+e.toUpperCase(),variant:"filled",value:f[t],onChange:function(e){return function(e,t){var n=Object(i.a)(f);n[e]=t,O(n)}(t,e.target.value)},onBlur:g})},e)}))})}var be={key:"position",displayName:"Position",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsx)(je,{prop:"position",selection:t,data:n,onChange:r,defaultValue:[0,0,0]})}};var pe={key:"rotation",displayName:"Rotation",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsx)(je,{prop:"rotation",selection:t,data:n,onChange:r,defaultValue:[0,0,0]})}};var de={key:"scale",displayName:"Scale",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsx)(je,{prop:"scale",selection:t,data:n,onChange:r,defaultValue:[1,1,1]})}},fe=n(197),Oe=n(199),he=n(186),me=Object(E.a)((function(e){return{evenlySpaced:{"& > *":{margin:e.spacing(1)}}}}));function ve(e){var t=e.selection,n=e.data,a=e.onChange,c=e.prop,o=e.defaultValue,i=e.label,l=me(),j=Object(r.useMemo)((function(){var e=o;return n.objects.forEach((function(n){t.has(n.id)&&void 0!==n.props[c]&&(e=n.props[c])})),e}),[t,n,c,o]),b=Object(r.useState)(o),p=Object(u.a)(b,2),d=p[0],f=p[1];Object(r.useEffect)((function(){f(j)}),[j]);return Object(B.jsx)(fe.a,{className:l.evenlySpaced,children:Object(B.jsx)(he.a,{control:Object(B.jsx)(Oe.a,{variant:"filled",checked:d,onChange:function(e){var r=e.target.checked;f(r);var o=Object(s.a)(Object(s.a)({},n),{},{objects:n.objects.map((function(e){return t.has(e.id)?Object(s.a)(Object(s.a)({},e),{},{props:Object(s.a)(Object(s.a)({},e.props),{},Object(se.a)({},c,r))}):e}))});a(o)}}),label:i})})}var xe={key:"body",displayName:"Body",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsxs)(fe.a,{children:[Object(B.jsx)(ve,{prop:"kinematic",selection:t,data:n,onChange:r,label:"Kinematic",defaultValue:!0}),Object(B.jsx)(ve,{prop:"enableBody",selection:t,data:n,onChange:r,label:"Enable",defaultValue:!0})]})}};function ge(e){var t=e.selection,n=e.data,a=e.onChange,c=e.prop,o=e.defaultValue,i=Object(r.useMemo)((function(){var e=o;return n.objects.forEach((function(n){t.has(n.id)&&void 0!==n.props[c]&&(e=n.props[c])})),e}),[t,n,c,o]),l=Object(r.useState)(o),j=Object(u.a)(l,2),b=j[0],p=j[1];Object(r.useEffect)((function(){p(i)}),[i]);return Object(B.jsx)("input",{type:"color",value:b,onChange:function(e){var r=e.target.value;p(r);var o=Object(s.a)(Object(s.a)({},n),{},{objects:n.objects.map((function(e){return t.has(e.id)?Object(s.a)(Object(s.a)({},e),{},{props:Object(s.a)(Object(s.a)({},e.props),{},Object(se.a)({},c,r))}):e}))});a(o)}})}var ye={key:"color",displayName:"Color",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsx)(ge,{prop:"color",selection:t,data:n,onChange:r,defaultValue:"#ffffff"})}},Ce=Object(E.a)((function(e){return{evenlySpaced:{"& > *":{margin:e.spacing(1)}}}}));function ke(e){var t=e.selection,n=e.data,a=e.onChange,c=e.prop,o=e.defaultValue,i=e.label,l=Ce(),j=Object(r.useMemo)((function(){var e=0;return n.objects.forEach((function(n){t.has(n.id)&&(void 0!==n.props[c]?e+=n.props[c]:e+=o)})),e*=1/t.size}),[t,n,c,o]),b=Object(r.useState)(o),p=Object(u.a)(b,2),d=p[0],f=p[1];Object(r.useEffect)((function(){f(Math.round(1e3*j)/1e3)}),[j]);return Object(B.jsx)(fe.a,{className:l.evenlySpaced,children:Object(B.jsx)(le.a,{fullWidth:!0,label:i,variant:"filled",value:d,onChange:function(e){return f(e.target.value)},onBlur:function(){if(isNaN(d))f(j);else{var e=Object(s.a)(Object(s.a)({},n),{},{objects:n.objects.map((function(e){if(t.has(e.id)){var n=void 0!==e.props[c]?e.props[c]:o;return n+=d-j,Object(s.a)(Object(s.a)({},e),{},{props:Object(s.a)(Object(s.a)({},e.props),{},Object(se.a)({},c,n))})}return e}))});a(e)}}})})}var Se={key:"roundBrush",displayName:"Round brush",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsxs)(fe.a,{children:[Object(B.jsx)(ke,{prop:"roundRadius",selection:t,data:n,onChange:r,defaultValue:0,label:"Round radius"}),Object(B.jsx)(ve,{prop:"flatTop",selection:t,data:n,onChange:r,defaultValue:!1,label:"Flat top"}),Object(B.jsx)(ve,{prop:"flatBottom",selection:t,data:n,onChange:r,defaultValue:!1,label:"Flat bottom"})]})}};var Me={key:"visibility",displayName:"Visibility",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsx)(ve,{prop:"visible",selection:t,data:n,onChange:r,label:"Visible",defaultValue:!0})}},we=Object(E.a)((function(e){return{evenlySpaced:{"& > *":{margin:e.spacing(1)}}}}));function Ve(e){var t=e.selection,n=e.data,a=e.onChange,c=e.prop,o=e.defaultValue,i=e.label,l=we(),j=Object(r.useMemo)((function(){return n.objects.find((function(e){return t.has(e.id)})).props[c]||o||""}),[t,n,c,o]),b=Object(r.useState)(o),p=Object(u.a)(b,2),d=p[0],f=p[1];Object(r.useEffect)((function(){f(j)}),[j]);return Object(B.jsx)(fe.a,{className:l.evenlySpaced,children:Object(B.jsx)(le.a,{fullWidth:!0,label:i,variant:"filled",value:d,onChange:function(e){return f(e.target.value)},onBlur:function(){if(function(e){try{return new URL(e,$()),!0}catch(t){return!1}}(d)){var e=Object(s.a)(Object(s.a)({},n),{},{objects:n.objects.map((function(e){return t.has(e.id)?Object(s.a)(Object(s.a)({},e),{},{props:Object(s.a)(Object(s.a)({},e.props),{},Object(se.a)({},c,d))}):e}))});a(e)}else f(j)}})})}var Ee=[be,pe,de,xe,ye,Me,{key:"model",displayName:"Model",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsx)(Ve,{prop:"modelUrl",selection:t,data:n,onChange:r,defaultValue:"",label:"URL"})}}],ze=[].concat(Ee,[Se]),Pe=[be,ye];var De={key:"boxSize",displayName:"Size",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsx)(je,{prop:"size",selection:t,data:n,onChange:r,defaultValue:[1,1,1]})}},Ne=["size"];var Re={key:"box",displayName:"Box",inspectors:[].concat(Object(i.a)(ze),[De]),component:function(e){var t=e.size,n=Object(P.a)(e,Ne),a=t=t||[1,1,1],c=Object(u.a)(a,3),o=c[0],i=c[1],l=c[2],j=Object(r.useMemo)((function(){return Object(D.c)({size:[o,i,l]})}),[o,i,l]);return Object(B.jsx)(ie,Object(s.a)({support:j},n))}};var Be={key:"sphereSize",displayName:"Size",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsx)(ke,{prop:"radius",selection:t,data:n,onChange:r,defaultValue:.5,label:"Radius"})}},Le=["radius"];var Ie={key:"sphere",displayName:"Sphere",inspectors:[].concat(Object(i.a)(Ee),[Be]),component:function(e){var t=e.radius,n=Object(P.a)(e,Le);t=t||.5;var a=Object(r.useMemo)((function(){return Object(D.i)({radius:t})}),[t]);return Object(B.jsx)(ce,Object(s.a)({support:a},n))}};var Ue={key:"cylinderSize",displayName:"Size",component:function(e){var t=e.selection,n=e.data,r=e.onChange;return Object(B.jsxs)(fe.a,{children:[Object(B.jsx)(ke,{prop:"r1",selection:t,data:n,onChange:r,defaultValue:.5,label:"Radius 1"}),Object(B.jsx)(ke,{prop:"r2",selection:t,data:n,onChange:r,defaultValue:.5,label:"Radius 2"}),Object(B.jsx)(ke,{prop:"height",selection:t,data:n,onChange:r,defaultValue:1,label:"Height"})]})}},Fe=["height","r1","r2"];var We={key:"cylinder",displayName:"Cylinder",inspectors:[].concat(Object(i.a)(ze),[Ue]),component:function(e){var t=e.height,n=e.r1,a=e.r2,c=Object(P.a)(e,Fe);n=n||.5,a=a||.5,t=t||1;var o=Object(r.useMemo)((function(){return Object(D.g)(Object(D.e)({position:[0,-t/2,0],radius:n}),Object(D.e)({position:[0,t/2,0],radius:a}))}),[t,n,a]);return Object(B.jsx)(ie,Object(s.a)({support:o},c))}},Ae=["position","color","inEditor"],qe={key:"pointLight",displayName:"Point Light",inspectors:Object(i.a)(Pe),component:function(e){var t=e.position,n=e.color,r=e.inEditor,a=Object(P.a)(e,Ae);return n=n||"#ffffff",t=t||[0,0,0],Object(B.jsxs)("group",{position:t,children:[r&&Object(B.jsxs)("mesh",{children:[Object(B.jsx)("meshBasicMaterial",{color:n}),Object(B.jsx)("sphereGeometry",{args:[.25,16,8]})]}),Object(B.jsx)("pointLight",Object(s.a)({color:n},a))]})}},Ge=["position","color","inEditor"],Te={key:"ambientLight",displayName:"Ambient Light",inspectors:Object(i.a)(Pe),component:function(e){var t=e.position,n=e.color,r=e.inEditor,a=Object(P.a)(e,Ge);return n=n||"#ffffff",t=t||[0,0,0],Object(B.jsxs)("group",{position:t,children:[r&&Object(B.jsxs)("mesh",{children:[Object(B.jsx)("meshBasicMaterial",{color:n}),Object(B.jsx)("sphereGeometry",{args:[.25,16,8]})]}),Object(B.jsx)("ambientLight",Object(s.a)({color:n},a))]})}},Je=["position","color","inEditor"],Xe={key:"directionalLight",displayName:"Directional Light",inspectors:Object(i.a)(Pe),component:function(e){var t=e.position,n=e.color,r=e.inEditor,a=Object(P.a)(e,Je);return n=n||"#ffffff",t=t||[0,0,0],Object(B.jsxs)("group",{position:t,children:[r&&Object(B.jsxs)("mesh",{children:[Object(B.jsx)("meshBasicMaterial",{color:n}),Object(B.jsx)("sphereGeometry",{args:[.25,16,8]})]}),Object(B.jsx)("directionalLight",Object(s.a)({color:n},a))]})}};function Ye(e){var t=e.selection,n=e.data,a=e.onChange,c=e.prop,o=e.label,j=e.defaultValue,b=Object(r.useMemo)((function(){var e=new l.Vector2,r=new l.Vector2;return n.objects.forEach((function(n){t.has(n.id)&&(n.props[c]?r.set.apply(r,Object(i.a)(n.props[c])):r.set.apply(r,Object(i.a)(j)),e.add(r))})),e.multiplyScalar(1/t.size),[e.x,e.y]}),[t,n,c,j]),p=Object(r.useState)(j),d=Object(u.a)(p,2),f=d[0],O=d[1],h=Object(u.a)(b,2),m=h[0],v=h[1];Object(r.useEffect)((function(){O([m,v].map((function(e){return Math.round(1e3*e)/1e3})))}),[m,v]);var x=function(){if(f.some((function(e){return isNaN(e)})))O(b);else{var e=Object(s.a)(Object(s.a)({},n),{},{objects:n.objects.map((function(e){if(t.has(e.id)){for(var n=Object(i.a)(e.props[c]||j),r=0;r<n.length;r++)n[r]+=f[r]-b[r];return Object(s.a)(Object(s.a)({},e),{},{props:Object(s.a)(Object(s.a)({},e.props),{},Object(se.a)({},c,n))})}return e}))});a(e)}};return Object(B.jsx)(ue.a,{container:!0,spacing:1,children:["x","y"].map((function(e,t){return Object(B.jsx)(ue.a,{item:!0,xs:6,children:Object(B.jsx)(le.a,{label:(o?o+" ":"")+e.toUpperCase(),variant:"filled",value:f[t],onChange:function(e){return function(e,t){var n=Object(i.a)(f);n[e]=t,O(n)}(t,e.target.value)},onBlur:x})},e)}))})}var $e=["size","thickness","frontDoorSize","leftDoorSize","rightDoorSize","backDoorSize"];var Ke={key:"room",displayName:"Room",component:function(e){var t=e.selection,n=e.data,r=e.onChange,a=[.5,.5];return Object(B.jsxs)(fe.a,{children:[Object(B.jsx)(Ye,{label:"Left door size",prop:"leftDoorSize",selection:t,data:n,onChange:r,defaultValue:a}),Object(B.jsx)(Ye,{label:"Right door size",prop:"rightDoorSize",selection:t,data:n,onChange:r,defaultValue:a}),Object(B.jsx)(Ye,{label:"Front door size",prop:"frontDoorSize",selection:t,data:n,onChange:r,defaultValue:a}),Object(B.jsx)(Ye,{label:"Back door size",prop:"backDoorSize",selection:t,data:n,onChange:r,defaultValue:a})]})}},Qe={key:"room",displayName:"Room",inspectors:[].concat(Object(i.a)(Ee),[De,Ke]),component:function(e){var t=e.size,n=e.thickness,a=e.frontDoorSize,c=e.leftDoorSize,o=e.rightDoorSize,i=e.backDoorSize,l=Object(P.a)(e,$e);n=n||.1;var j=t=t||[1,1,1],b=Object(u.a)(j,3),p=b[0],d=b[1],f=b[2],O=Object(r.useMemo)((function(){return[.5,.5]}),[]),h=Object(r.useMemo)((function(){return[[i||O,2,-1],[a||O,2,1],[[0,0],1,-1],[[0,0],1,1],[c||O,0,-1],[o||O,0,1]]}),[a,c,o,i,O]),m=Object(r.useMemo)((function(){return h.flatMap((function(e){var t=Object(u.a)(e,3),r=t[0],a=t[1],c=t[2];return function(e){var t=e.thickness,n=e.axisIndex,r=e.side,a=e.size,c=e.doorSize;if(c.some((function(e){return e<=0}))||1===n){var o=0===n?t:a[0]-2*t,i=1===n?t:a[1],s=2===n?t:0===n?a[2]:a[2]-2*t,u=[0,0,0];return u[n]=(a[n]-t)*r/2,[Object(D.c)({position:u,size:[o,i,s]})]}var l=[0===n?t:a[0]-2*t,1===n?t:a[1],2===n?t:0===n?a[2]:a[2]-2*t],j=[].concat(l),b=[0,0,0];b[n]=(a[n]-t)*r/2;var p=[].concat(b),d=[].concat(b);p[2-n]+=(l[2-n]+c[0])/4,d[2-n]-=(l[2-n]+c[0])/4,l[2-n]=(l[2-n]-c[0])/2;var f=[].concat(b);return f[1]+=c[1]/2,j[1]-=c[1],j[2-n]=c[0],l.every((function(e){return e>0}))&&j.every((function(e){return e>0}))?[Object(D.c)({position:p,size:l}),Object(D.c)({position:d,size:l}),Object(D.c)({position:f,size:j})]:[]}({thickness:n,axisIndex:a,size:[p,d,f],side:c,doorSize:r})}))}),[p,d,f,n,h]);return Object(B.jsx)(B.Fragment,{children:m.map((function(e,t){return Object(B.jsx)(ce,Object(s.a)({support:e},l),t)}))})}},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.15,r=new l.CylinderGeometry(t,t,1,e,1).translate(0,.5,0);return r.merge(new l.ConeGeometry(n,.5,e,1).translate(0,1.25,0)),r}();function He(){return Ze}function _e(e,t){Object(r.useEffect)((function(){return document.addEventListener(e,t),function(){document.removeEventListener(e,t)}}),[e,t])}function et(){var e=Object(r.useRef)({});return _e("keydown",Object(r.useCallback)((function(t){e.current[1===t.key.length?t.key.toUpperCase():t.key]=!0}),[])),_e("keyup",Object(r.useCallback)((function(t){e.current[1===t.key.length?t.key.toUpperCase():t.key]=!1}),[])),e}function tt(e,t){var n=Object(r.useRef)({});_e("keydown",Object(r.useCallback)((function(r){n.current[1===r.key.length?r.key.toUpperCase():r.key]=!0,r.target===document.body&&e.every((function(e){return n.current[e]}))&&Object.keys(n.current).filter((function(e){return n.current[e]})).every((function(t){return e.includes(t)}))&&t()}),[e,t])),_e("keyup",Object(r.useCallback)((function(e){n.current[1===e.key.length?e.key.toUpperCase():e.key]=!1}),[]))}var nt=["position","rotation","inEditor"];function rt(e){var t=e.color,n=e.position,a=e.rotation,c=He(),o=A(Object(r.useMemo)((function(){return Object(D.g)(Object(D.e)({position:[0,.25,0],radius:.25}),Object(D.e)({position:[0,-1.25,0],radius:.25}))}),[]));return Object(B.jsxs)("group",{position:n,rotation:a.map((function(e){return e*Math.PI/180})),children:[Object(B.jsx)("mesh",{geometry:o,children:Object(B.jsx)("meshBasicMaterial",{color:t})}),Object(B.jsx)("mesh",{geometry:c,rotation:[-Math.PI/2,0,0],children:Object(B.jsx)("meshBasicMaterial",{color:t})})]})}var at={playerSpawn:{key:"playerSpawn",displayName:"Player Spawnpoint",inspectors:[be,pe],component:function(e){var t=e.position,n=e.rotation,r=e.inEditor;return Object(P.a)(e,nt),r?(t=t||[0,0,0],n=n||[0,0,0],Object(B.jsx)(rt,{position:t,rotation:n,color:"#0000ff"})):null}},box:Re,sphere:Ie,cylinder:We,pointLight:qe,ambientLight:Te,directionalLight:Xe,room:Qe},ct=n(187),ot=n(189),it=n(188),st=n(190),ut=n(96),lt=n.n(ut),jt=n(97),bt=n.n(jt);function pt(e){var t=Object(r.useState)(!0),n=Object(u.a)(t,2),a=n[0],c=n[1];return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(ct.a,{button:!0,onClick:function(){return c(!a)},children:[Object(B.jsx)(it.a,{children:a?Object(B.jsx)(lt.a,{}):Object(B.jsx)(bt.a,{})}),Object(B.jsx)(ot.a,{children:e.title})]}),Object(B.jsx)(st.a,{in:a,children:Object(B.jsx)(ct.a,{children:e.children})})]})}function dt(e){var t=e.data,n=e.selection,r=e.onChange,a=t.objects.filter((function(e){return n.has(e.id)})),c=a.map((function(e){return at[e.type].inspectors})),o=a.length>0?c.reduce((function(e,t){return t.filter((function(t){return e.includes(t)}))})):[];return Object(B.jsx)("form",{noValidate:!0,children:Object(B.jsx)(z.a,{children:o.map((function(e){var a=e.component;return Object(B.jsx)(pt,{title:e.displayName,children:Object(B.jsx)(a,{data:t,selection:n,onChange:r})},e.key)}))})})}function ft(e){var t=e.onClick,n=e.text,r=e.component,a=e.distance,c=r,o=1/Math.sqrt(3)*a;return Object(B.jsx)(ue.a,{item:!0,xs:4,children:Object(B.jsx)(m.a,{title:"Add ".concat(n),children:Object(B.jsx)(j.a,{onClick:t,children:Object(B.jsx)("div",{style:{position:"relative",width:"1.0in",height:"1.0in",overflow:"hidden"},children:Object(B.jsx)(R.a,{camera:{position:[o,o,o]},invalidateFrameloop:!0,children:Object(B.jsxs)(I,{children:[Object(B.jsx)("directionalLight",{position:[1,3,2]}),Object(B.jsx)("ambientLight",{}),Object(B.jsx)(c,{inEditor:!0})]})})})})})})}function Ot(e){var t=e.onSelect,n=Object(r.useMemo)((function(){var e=[],n=function(n){e.push(Object(B.jsx)(ft,{onClick:function(){return t(n)},text:at[n].displayName,component:at[n].component,distance:at[n].distance||2},n))};for(var r in at)n(r);return e}),[t]);return Object(B.jsx)(ue.a,{container:!0,children:n})}var ht=n(192),mt=["children","value","index"];function vt(e){var t=e.children,n=e.value,r=e.index,a=Object(P.a)(e,mt);return Object(B.jsx)(ht.a,{in:n===r,style:{display:n===r?"block":"none"},children:Object(B.jsx)("div",Object(s.a)(Object(s.a)({role:"tabpanel"},a),{},{children:Object(B.jsx)(fe.a,{children:t})}))})}var xt=["onBeginDrag","onEndDrag","onDrag","color","direction"];function gt(e){var t=e.onBeginDrag,n=e.onEndDrag,a=e.onDrag,c=e.color,o=e.direction,i=Object(P.a)(e,xt),j=He(),b=Object(r.useState)(),p=Object(u.a)(b,2),d=p[0],f=p[1],O=Object(u.a)(o,3),h=O[0],m=O[1],v=O[2],x=[Math.atan2(Math.sqrt(Math.pow(h,2)+Math.pow(v,2)),m),0,Math.atan2(-h,v)],g=Object(r.useCallback)((function(){f(!0)}),[f]),y=Object(r.useCallback)((function(){f(!1)}),[f]),C=Object(r.useRef)(new l.Vector3),k=Object(r.useRef)(),S=Object(r.useState)(!1),M=Object(u.a)(S,2),w=M[0],V=M[1],E=Object(r.useCallback)((function(e){e.stopPropagation(),e.target.setPointerCapture(e.pointerId),V(!0),C.current.set(0,0,0),t&&t()}),[V,t]),z=Object(r.useCallback)((function(e){e.stopPropagation(),e.target.releasePointerCapture(e.pointerId),V(!1),n&&n(C.current.clone())}),[V,n]),D=Object(R.d)(),N=D.camera,L=D.size,I=Object(r.useCallback)((function(e){var t=new l.Vector3,n=new l.Vector3(h,m,v);if(w){k.current.getWorldPosition(t),n.add(t),n.project(N),t.project(N),n.sub(t);var r=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2));n.multiplyScalar(1/r);var c=2*n.x*e.movementX/L.width-2*n.y*e.movementY/L.height;n.multiplyScalar(c),n.add(t),n.unproject(N),t.unproject(N),n.sub(t),a&&(C.current.add(n),a(n))}}),[w,a,N,h,m,v,L]);return Object(B.jsx)("mesh",Object(s.a)(Object(s.a)({geometry:j,onPointerDown:E,onPointerUp:z,onPointerMove:I,onPointerOver:g,onPointerLeave:y,rotation:x,ref:k,renderOrder:1e3},i),{},{children:Object(B.jsx)("meshBasicMaterial",{color:d||w?"#ffbb22":c})}))}function yt(e){var t=e.position,n=e.onDrag,a=e.onBeginDrag,c=e.onEndDrag,o=Object(r.useRef)(),i=Object(r.useCallback)((function(){a&&a()}),[a]),s=Object(r.useCallback)((function(e){c&&c(e)}),[c]),j=Object(r.useCallback)((function(e){n&&n(e)}),[n]),b=Object(R.d)(),p=b.camera,d=b.gl,f=b.scene,O=Object(r.useMemo)((function(){return new l.Scene}),[]);Object(r.useEffect)((function(){O.clear(),O.add(o.current)}),[f,o,O]);var h=new l.Vector3;Object(R.b)((function(){o.current.getWorldPosition(h),h.applyMatrix4(p.matrixWorldInverse);var e=-.1*h.z;o.current.scale.set(e,e,e),d.clearDepth(),d.render(O,p)}),2);return Object(B.jsx)("group",{ref:o,position:t,children:[[[1,0,0],"#ff0000"],[[0,1,0],"#00ff00"],[[0,0,1],"#0000ff"]].map((function(e,t){var n=Object(u.a)(e,2),r=n[0],a=n[1];return Object(B.jsx)(gt,{direction:r,color:a,onDrag:j,onBeginDrag:i,onEndDrag:s},t)}))})}var Ct=["position","mode"],kt=Object(r.forwardRef)((function(e,t){var n=e.position,a=e.mode,c=(Object(P.a)(e,Ct),Object(r.useRef)()),o=Object(R.d)().setDefaultCamera;_e("mousemove",Object(r.useCallback)((function(e){"fps"===a&&(t.current.rotation.x-=.0025*e.movementY,c.current.rotation.y-=.0025*e.movementX)}),[a,t]));var i=et();Object(r.useEffect)((function(){o(t.current)}),[o,t]);var s=Object(u.a)(n,3),j=s[0],b=s[1],p=s[2];Object(r.useEffect)((function(){c.current.position.set(j,b,p)}),[j,b,p]);var d=new l.Vector3,f=new l.Vector3,O=new l.Vector3;return Object(R.b)((function(e,n){if(t.current.updateMatrixWorld(),"fps"===a){var r=3*(i.current.Shift?4:1),o=c.current.position;t.current.matrixWorld.extractBasis(d,f,O),O.negate(),i.current.E&&o.addScaledVector(f,n*r),i.current.Q&&o.addScaledVector(f,-n*r),i.current.D&&o.addScaledVector(d,n*r),i.current.A&&o.addScaledVector(d,-n*r),i.current.W&&o.addScaledVector(O,n*r),i.current.S&&o.addScaledVector(O,-n*r)}})),Object(B.jsx)("group",{ref:c,children:Object(B.jsx)("perspectiveCamera",{ref:t,fov:75})})})),St=n(28);function Mt(){var e=Object(St.a)();return Object(r.useMemo)((function(){return function(e){var t=new l.MeshMatcapMaterial({blending:l.CustomBlending,blendSrc:l.OneFactor,blendDst:l.DstAlphaFactor,color:(new l.Color).set(e),transparent:!0});return(new l.TextureLoader).load("/textures/matcap.png",(function(e){t.matcap=e,t.matcap=e})),t}(e.palette.secondary.main)}),[e])}function wt(e){var t=e.selection,n=Mt();return Object(R.b)((function(e){var r=e.gl,a=e.scene,c=e.camera;if(r.clear(),r.render(a,c),t.size>0){var o=a.children.map((function(e){return e.visible}));a.children.forEach((function(e){e.visible=t.has(e.userData.id)})),a.overrideMaterial=n,r.render(a,c),a.children.forEach((function(e,t){e.visible=o[t]})),a.overrideMaterial=null}r.autoClear=!1}),1),null}function Vt(e){var t=e.data,n=e.selection,a=e.onSelectionChange,c=e.onChange,o=e.onEdit,j=e.cameraRef,b=Object(r.useState)(),p=Object(u.a)(b,2),d=p[0],f=p[1];_e("mouseup",(function(e){f()}));var O=Object(r.useCallback)((function(e){var t=new Set(n);t.has(e)?t.delete(e):t.add(e),a(t)}),[n,a]),h=Object(r.useCallback)((function(){a(new Set)}),[a]),m=Object(r.useCallback)((function(e){return Object(s.a)(Object(s.a)({},t),{},{objects:t.objects.map((function(t){if(n.has(t.id)){var r=t.props.position?[t.props.position[0]+e.x,t.props.position[1]+e.y,t.props.position[2]+e.z]:[e.x,e.y,e.z];return Object(s.a)(Object(s.a)({},t),{},{props:Object(s.a)(Object(s.a)({},t.props),{},{position:r})})}return t}))})}),[t,n]),v=Object(r.useState)(!1),x=Object(u.a)(v,2),g=x[0],y=x[1],C=Object(r.useCallback)((function(){y(!0)}),[y]),k=Object(r.useCallback)((function(e){c(m(e))}),[m,c]),S=Object(r.useCallback)((function(){o(t),y(!1)}),[t,o,y]),M=Object(r.useMemo)((function(){var e=new l.Vector3(0,0,0),r=new l.Vector3;return t.objects.forEach((function(t){n.has(t.id)&&(t.props.position?r.set.apply(r,Object(i.a)(t.props.position)):r.set(0,0,0),e.add(r))})),e.multiplyScalar(1/n.size),e}),[t,n]);_e("keyup",(function(e){"Delete"===e.key&&e.target===document.body&&(c(Object(s.a)(Object(s.a)({},t),{},{objects:t.objects.filter((function(e){return!n.has(e.id)}))})),a(new Set))}));var w=t.objects.map((function(e,t){var n=at[e.type].component;return Object(B.jsx)("group",{userData:e,onPointerUp:function(t){t.stopPropagation(),g||"fps"===d||O(e.id)},children:Object(B.jsx)(n,Object(s.a)(Object(s.a)({},e.props),{},{inEditor:!0}))},e.id)}));return Object(B.jsxs)(R.a,{onMouseDown:function(e){2===e.buttons&&f("fps")},onContextMenu:function(e){e.preventDefault()},onPointerMissed:h,children:[Object(B.jsxs)(U,{children:[Object(B.jsx)(kt,{position:[0,0,2],mode:d,ref:j}),w,Object(B.jsx)(yt,{onDrag:k,onBeginDrag:C,onEndDrag:S,position:[M.x,M.y,M.z]})]}),Object(B.jsx)(wt,{selection:n})]})}var Et=n(200),zt=["position","rotation"],Pt=["key"];function Dt(e){var t=e.position,n=e.direction,a=e.speed,c=Object(r.useRef)(),o=F(c,Object(r.useMemo)((function(){return{supports:[Object(D.i)({radius:.25})]}}),[])),i=Object(u.a)(t,3),s=i[0],l=i[1],j=i[2],b=Object(u.a)(n,3),p=b[0],d=b[1],f=b[2];return Object(r.useEffect)((function(){o.transform.setPosition(s+p,l+d,j+f),o.update()}),[o,s,l,j,p,d,f]),Object(r.useEffect)((function(){o.velocity.set(p*a,d*a,f*a),o.update()}),[o,p,d,f,a]),Object(B.jsxs)("mesh",{ref:c,position:t,children:[Object(B.jsx)("sphereGeometry",{args:[.25,16,8]}),Object(B.jsx)("meshStandardMaterial",{color:"white"})]})}function Nt(e){var t=e.position,n=e.rotation,a=Object(P.a)(e,zt);t=t||[0,0,0],n=n||[0,0,0];var c=Object(r.useRef)(),o=Object(r.useRef)(),j=Object(R.d)().setDefaultCamera,b=Object(r.useRef)(),p=F(b,Object(r.useMemo)((function(){return{supports:[Object(D.g)(Object(D.e)({position:[0,.25,0],radius:.25}),Object(D.e)({position:[0,-1.25,0],radius:.25}))]}}),[])),d=Object(r.useState)([]),f=Object(u.a)(d,2),O=f[0],h=f[1],m=t,v=Object(u.a)(m,3),x=v[0],g=v[1],y=v[2];Object(r.useEffect)((function(){p.transform.setPosition(x,g,y),p.update()}),[p,x,g,y]);var C=n,k=Object(u.a)(C,3),S=k[0],M=k[1],w=k[2];Object(r.useEffect)((function(){o.current.rotation.y=M*Math.PI/180}),[S,M,w]);var V=function(e){var t=Object(r.useRef)([]);return Object(r.useEffect)((function(){var n=Object(D.a)(e).subscribe((function(e){t.current.push(e)}));return function(){return n.unsubscribe()}}),[e,t]),Object(r.useEffect)((function(){var n=Object(D.f)(e).subscribe((function(e){var n=t.current.indexOf(e);t.current.splice(n,1)}));return function(){return n.unsubscribe()}}),[e,t]),t}(p);_e("mousemove",Object(r.useCallback)((function(e){if(c.current){var t=c.current.rotation.x;c.current.rotation.x=Math.min(Math.max(t-.0025*e.movementY,-Math.PI/2),Math.PI/2),o.current.rotation.y-=.0025*e.movementX}}),[])),Object(r.useEffect)((function(){j(c.current)}),[j]);var E=et(),z=new l.Vector3,N=new l.Vector3,L=new l.Vector3,I=new l.Vector3;return _e("mousedown",(function(){h([].concat(Object(i.a)(O),[{key:Object(Et.a)(),position:[p.position.x,p.position.y,p.position.z],direction:[I.x,I.y,I.z],speed:15}]).slice(-10))})),Object(R.b)((function(e,t){c.current.updateMatrixWorld(),I.setFromMatrixColumn(c.current.matrixWorld,2),I.negate(),o.current.matrixWorld.extractBasis(z,N,L),L.negate(),E.current.E&&(p.position.addScaledVector(N,5*t),p.transform.setPosition(p.position),p.update()),E.current.Q&&(p.position.addScaledVector(N,5*-t),p.transform.setPosition(p.position),p.update()),E.current.D&&(p.position.addScaledVector(z,5*t),p.transform.setPosition(p.position),p.update()),E.current.A&&(p.position.addScaledVector(z,5*-t),p.transform.setPosition(p.position),p.update()),E.current.W&&(p.position.addScaledVector(L,5*t),p.transform.setPosition(p.position),p.update()),E.current.S&&(p.position.addScaledVector(L,5*-t),p.transform.setPosition(p.position),p.update()),E.current[" "]&&V.current.length>0&&V.current.some((function(e){return e.amount.y/e.amount.length()<-.5}))&&p.velocity.set(0,3,0)})),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("group",Object(s.a)(Object(s.a)({ref:b},a),{},{children:Object(B.jsx)("group",{ref:o,children:Object(B.jsx)("perspectiveCamera",{ref:c,fov:75})})})),O.map((function(e){var t=e.key,n=Object(P.a)(e,Pt);return Object(B.jsx)(Dt,Object(s.a)({},n),t)}))]})}function Rt(e){return{type:e.type,props:e.props,id:Object(Et.a)()}}function Bt(e){var t=e.data,n=t.objects.find((function(e){return"playerSpawn"===e.type})),r=n.props.position,a=n.props.rotation;return Object(B.jsx)(R.a,{onClick:function(e){return e.target.requestPointerLock()},children:Object(B.jsxs)(U,{children:[t.objects.map((function(e,t){var n=at[e.type].component;return Object(B.jsx)(n,Object(s.a)({},e.props),e.id)})),Object(B.jsx)(Nt,{position:r,rotation:a})]})})}var Lt=Object(E.a)((function(e){return{root:{display:"flex"},drawer:{width:320,flexShrink:0},drawerContent:{width:320,overflowX:"hidden"},content:{flexGrow:1,position:"absolute",left:320,top:0,right:0,bottom:0}}}));function It(e){var t=e.data,n=e.selection,a=e.camera,c=e.onChange,o=e.onPlay,b=e.onStop,d=e.isPlaying,v=Lt(),g=Object(r.useState)(0),C=Object(u.a)(g,2),S=C[0],w=C[1];return Object(B.jsx)(p.a,{variant:"persistent",className:v.drawer,open:!0,children:Object(B.jsxs)("div",{className:v.drawerContent,children:[Object(B.jsxs)(h.a,{children:[Object(B.jsx)(m.a,{title:"New",children:Object(B.jsx)(j.a,{onClick:function(){c({objects:[]})},children:Object(B.jsx)(k.a,{})})}),Object(B.jsx)(m.a,{title:"Upload",children:Object(B.jsx)(j.a,{onClick:function(){new Promise((function(e,t){var n=document.createElement("input");n.setAttribute("type","file"),n.style.display="none",document.body.appendChild(n),n.addEventListener("change",(function(){this.files[0].text().then((function(t){return e(t)})).catch((function(e){return t(e)}))}),!1),n.click(),document.body.removeChild(n)})).then((function(e){return JSON.parse(e)})).then((function(e){return c(e)}))},children:Object(B.jsx)(V.a,{})})}),Object(B.jsx)(m.a,{title:"Download",onClick:function(){!function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(t))),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}("scene.json",JSON.stringify(t))},children:Object(B.jsx)(j.a,{children:Object(B.jsx)(M.a,{})})}),Object(B.jsx)(m.a,{title:d?"Stop":"Play",children:Object(B.jsx)(j.a,{onClick:d?b:o,children:d?Object(B.jsx)(y.a,{}):Object(B.jsx)(x.a,{})})})]}),Object(B.jsxs)(O.a,{onChange:function(e,t){return w(t)},value:S,variant:"fullWidth",children:[Object(B.jsx)(f.a,{label:"Palette"}),Object(B.jsx)(f.a,{label:"Properties"})]}),Object(B.jsx)(vt,{value:S,index:0,children:Object(B.jsx)(Ot,{onSelect:function(e){var n=new l.Vector3,r=new l.Vector3,o=new l.Vector3,u=new l.Vector3;a.current.matrixWorld.extractBasis(n,r,o),a.current.getWorldPosition(u),o.negate();var j=at[e].distance||2,b=[u.x+o.x*j,u.y+o.y*j,u.z+o.z*j];c(Object(s.a)(Object(s.a)({},t),{},{objects:[].concat(Object(i.a)(t.objects),[Rt({type:e,props:{kinematic:!0,position:b}})])}))}})}),Object(B.jsx)(vt,{value:S,index:1,children:Object(B.jsx)(dt,{data:t,selection:n,onChange:c})})]})})}function Ut(e){var t=function(e,t){var n=Object(r.useState)(e),a=Object(u.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(e),l=Object(u.a)(s,2),j=l[0],b=l[1],p=Object(r.useState)([]),d=Object(u.a)(p,2),f=d[0],O=d[1],h=Object(r.useState)([]),m=Object(u.a)(h,2),v=m[0],x=m[1],g=Object(r.useCallback)((function(){f.length>0&&(x([j].concat(Object(i.a)(v))),b(f[0]),o(f[0]),O(f.slice(1)))}),[j,f,v,b,O,x]),y=Object(r.useCallback)((function(){v.length>0&&(O([j].concat(Object(i.a)(f))),b(v[0]),o(v[0]),x(v.slice(1)))}),[j,f,v,b,O,x]),C=Object(r.useCallback)((function(e){O([j].concat(Object(i.a)(f)).splice(-(t||1e3))),b(e),o(e),x([])}),[j,f,b,O,x,t]);return[c,C,g,y,o]}((function(){return{objects:[]}})),n=Object(u.a)(t,5),a=n[0],c=n[1],o=n[2],l=n[3],j=n[4],p=Object(r.useState)(new Set),f=Object(u.a)(p,2),O=f[0],h=f[1],m=Object(r.useState)([]),v=Object(u.a)(m,2),x=v[0],g=v[1],y=Object(r.useState)(!1),C=Object(u.a)(y,2),k=C[0],S=C[1],M=Object(r.useState)(null),w=Object(u.a)(M,2),V=w[0],E=w[1],z=Lt(),P=Object(r.useRef)(),D=function(e){c(e)},N=a.objects.filter((function(e){return O.has(e.id)}));return tt(["Control","Z"],o),tt(["Control","Shift","Z"],l),tt(["Control","C"],(function(){g(N)})),tt(["Control","V"],(function(){var e=[].concat(Object(i.a)(a.objects),Object(i.a)(x.map(Rt)));c(Object(s.a)(Object(s.a)({},a),{},{objects:e}))})),Object(B.jsxs)("div",{className:z.root,children:[Object(B.jsx)(b.a,{}),Object(B.jsx)(It,{data:a,selection:O,onChange:D,camera:P,isPlaying:k,onPlay:function(){a.objects.find((function(e){return"playerSpawn"===e.type}))?S(!0):E("You need to place a spawnpoint first!")},onStop:function(){S(!1)}}),Object(B.jsxs)("main",{className:z.content,children:[k?Object(B.jsx)(Bt,{data:a}):Object(B.jsx)(Vt,{cameraRef:P,data:a,selection:O,onSelectionChange:h,onChange:function(e){j(e)},onEdit:D}),Object(B.jsx)(d.a,{open:!!V,onClose:function(){E(null)},message:V})]})]})}var Ft=function(){return Object(B.jsx)("div",{className:"App",children:Object(B.jsx)(Ut,{})})},Wt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,206)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(Ft,{})}),document.getElementById("root")),Wt()}},[[137,1,2]]]);
//# sourceMappingURL=main.431ccbdc.chunk.js.map